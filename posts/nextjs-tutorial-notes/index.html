<!DOCTYPE html>
<html lang="en" data-themeable>

<head>
    <title>Next.js Tutorial Notes</title>
    <!-- Meta. -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="Some" notes i jotted down while following the &quot;official&quot; next.js tutorial.>

    <!-- Favicon. -->
    <link rel="icon" type="image/svg+xml" href="../../images/favicon.png">

    <!-- Styling for common components. -->
    <link rel="stylesheet" href="../../style/common.css">
    <!-- Conditional CSS. -->
    <link rel="stylesheet" href="../../style/post.css">
    <link rel="stylesheet" href="../../style/github.css" id="theme-link">

    <!-- Common scripts. -->
    <script src="../../scripts/common.js" async></script>
    <!-- Conditional scripts. -->
</head>

<body>
    <div id="top-mask" data-themeable></div>
    <header>
      <div id="navbar" data-themeable>
        <h1 class="blogName">
          <a id="blog-name" href="../../index.html">Al's Blog</a>
        </h1>
        <!-- Rounded switch -->
        <div id="dark-mode-switch-wrapper" class="not-selectable">
          <label class="switch" for="switch-theme-btn">
            Toggle color theme.
            <input id="switch-theme-btn" type="checkbox">
            <span class="slider round">
              <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" class="moon">
                <path d="M0 0h24v24H0z" fill="none"/>
                <path fill="white" d="M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.06 7 9.54 0 4.48-2.94 8.27-7 9.54.95.3 1.95.46 3 .46 5.52 0 10-4.48 10-10S14.52 2 9 2z"/>
              </svg>
              <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" class="sun">
                <path d="M0 0h24v24H0z" fill="none"/>
                <path d="M20 15.31L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"/>
              </svg>
            </span>
          </label>
        </div>
      </div>
      <div id="drawer-menu" data-themeable>
        <div class="link-wrapper" data-themeable>
          <a href="../../index.html">Blog</a>
        </div>
        <div class="link-wrapper" data-themeable>
          <a href="../../projects.html">Projects</a>
        </div>
        <div class="link-wrapper" data-themeable>
          <a href="../../about.html">About</a>
        </div>
        <div id="drawer-menu-handle" data-themeable>
          <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24">
            <g><rect fill="none" height="24" width="24"/></g>
            <g>
              <g>
                <g><path d="M20,9H4v2h16V9z M4,15h16v-2H4V15z"/></g>
              </g>
            </g>
          </svg>
        </div>
      </div>
    </header>
    <div id="mask"></div>
    <div id="content" data-themeable>
<div class="post-content">
    <h1 class="post-title"><a href="index.html">Next.js Tutorial Notes</a></h1>
    <small class="post-info">
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" data-themeable><path d="M0 0h24v24H0z" fill="none"/><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"/></svg>
            Published Mon Apr 12 2021
        </div>
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" class="schedule" data-themeable><path d="M0 0h24v24H0z" fill="none"/><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/><path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg>
            10 min read
        </div>
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" class="tag-icon" data-themeable><path d="M0 0h24v24H0z" fill="none"/><path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"/></svg>
            <a class="post-tag" href="../../tags/Frontend/index.html" title="See all posts with this tag." data-themeable>Frontend</a>
        </div>
    </small>
    
        <div class="toc-wrapper">
            <div class="toc" data-themeable>
            <h1 class="contents-title">Contents</h1>
                <a href="#initializing-a-next-js-app">
<h1 class="toc-entry" style="text-indent:0" data-themeable>
<span class="toc-numb">1 </span>Initializing a Next.js App</h1></a>
                <a href="#navigate-between-pages">
<h1 class="toc-entry" style="text-indent:0" data-themeable>
<span class="toc-numb">2 </span>Navigate Between Pages</h1></a>
                <a href="#pages-in-next-js">
<h2 class="toc-entry" style="text-indent:10px" data-themeable>
<span class="toc-numb">2.1 </span>Pages in Next.js</h2></a>
                <a href="#link-component">
<h2 class="toc-entry" style="text-indent:10px" data-themeable>
<span class="toc-numb">2.2 </span>Link Component</h2></a>
                <a href="#client-side-navigation">
<h2 class="toc-entry" style="text-indent:10px" data-themeable>
<span class="toc-numb">2.3 </span>Client-Side Navigation</h2></a>
                <a href="#assets-metadata-and-css">
<h1 class="toc-entry" style="text-indent:0" data-themeable>
<span class="toc-numb">3 </span>Assets, Metadata, and CSS</h1></a>
                <a href="#assets">
<h2 class="toc-entry" style="text-indent:10px" data-themeable>
<span class="toc-numb">3.1 </span>Assets</h2></a>
                <a href="#image-component">
<h3 class="toc-entry" style="text-indent:20px" data-themeable>
<span class="toc-numb">3.1.1 </span>Image Component</h3></a>
                <a href="#metadata">
<h2 class="toc-entry" style="text-indent:10px" data-themeable>
<span class="toc-numb">3.2 </span>Metadata</h2></a>
                <a href="#css-styling">
<h2 class="toc-entry" style="text-indent:10px" data-themeable>
<span class="toc-numb">3.3 </span>CSS Styling</h2></a>
                <a href="#layout-component">
<h2 class="toc-entry" style="text-indent:10px" data-themeable>
<span class="toc-numb">3.4 </span>Layout Component</h2></a>
                <a href="#global-styles">
<h2 class="toc-entry" style="text-indent:10px" data-themeable>
<span class="toc-numb">3.5 </span>Global Styles</h2></a>
                <a href="#pre-rendering-and-data-fetching">
<h1 class="toc-entry" style="text-indent:0" data-themeable>
<span class="toc-numb">4 </span>Pre-rendering and Data Fetching</h1></a>
                <a href="#pre-rendering">
<h2 class="toc-entry" style="text-indent:10px" data-themeable>
<span class="toc-numb">4.1 </span>Pre-rendering</h2></a>
                <a href="#two-forms-of-pre-rendering">
<h2 class="toc-entry" style="text-indent:10px" data-themeable>
<span class="toc-numb">4.2 </span>Two Forms of Pre-rendering</h2></a>
                <a href="#static-generation-with-and-without-data">
<h2 class="toc-entry" style="text-indent:10px" data-themeable>
<span class="toc-numb">4.3 </span>Static Generation with and without Data</h2></a>
                <a href="#fetching-data-at-request-time">
<h2 class="toc-entry" style="text-indent:10px" data-themeable>
<span class="toc-numb">4.4 </span>Fetching Data at Request Time</h2></a>
                <a href="#client-side-rendering">
<h3 class="toc-entry" style="text-indent:20px" data-themeable>
<span class="toc-numb">4.4.1 </span>Client-side Rendering</h3></a>
                <a href="#swr">
<h3 class="toc-entry" style="text-indent:20px" data-themeable>
<span class="toc-numb">4.4.2 </span>SWR</h3></a>
                <a href="#dynamic-routes">
<h1 class="toc-entry" style="text-indent:0" data-themeable>
<span class="toc-numb">5 </span>Dynamic Routes</h1></a>
                <a href="#page-path-depends-on-external-data">
<h2 class="toc-entry" style="text-indent:10px" data-themeable>
<span class="toc-numb">5.1 </span>Page Path Depends on External Data</h2></a>
                <a href="#dynamic-routes-details">
<h2 class="toc-entry" style="text-indent:10px" data-themeable>
<span class="toc-numb">5.2 </span>Dynamic Routes Details</h2></a>
                <a href="#conclusion">
<h1 class="toc-entry" style="text-indent:0" data-themeable>
<span class="toc-numb">6 </span>Conclusion</h1></a>
            </div>
        </div>
    <p>This blog post contains some notes I took following the Next.js tutorial at <a href="https://nextjs.org/learn/basics/create-nextjs-app" title="" class="md-link" data-themeable>nextjs.org/learn/basics/create-nextjs-app</a>, in which you walk through building a <a href="https://github.com/alpalla/nextjs-tutorial" title="" class="md-link" data-themeable>simple blog app</a>.</p>
<h1 class="post-body-header">
              <a name="initializing-a-next-js-app" href="#initializing-a-next-js-app">Initializing a Next.js App</a>
            </h1><p>Initialize a Next.js app similarly to how you would with Create React App:</p>
<div class="code-block-wrapper" data-themeable><div class="copy-btn-wrapper">
	<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" class="copy-btn not-selectable" data-themeable><path d="M0 0h24v24H0z" fill="none"/><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/><title>Copy</title></svg>
	<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" class="done-icon not-selectable hidden"><path d="M0 0h24v24H0z" fill="none"/><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/></svg>
</div><div><pre class="code-block"><code class="language-shell">npx create-next-app nextjs-blog \
--use-npm --example \
&quot;https://github.com/vercel/next-learn-starter/tree/master/navigate-between-pages-starter&quot;</code></pre></div><textarea class="copy-content" readonly="readonly">npx create-next-app nextjs-blog \
--use-npm --example \
"https://github.com/vercel/next-learn-starter/tree/master/navigate-between-pages-starter"</textarea></div>
<h1 class="post-body-header">
              <a name="navigate-between-pages" href="#navigate-between-pages">Navigate Between Pages</a>
            </h1><h2 class="post-body-header">
              <a name="pages-in-next-js" href="#pages-in-next-js">Pages in Next.js</a>
            </h2><p>Creating pages in Next.js involves writing JSX and using React components, instead of writing HTML.</p>
<p>To create a page in your app you need to define a JS file in the <code class="inline-code" data-themeable>pages</code> directory in the root of your project.</p>
<p>The path to that file becomes the URL path.</p>
<p>Suppose I’ve got a blog built with Next.js at <code class="inline-code" data-themeable>myblog.com</code> and my <code class="inline-code" data-themeable>path</code> directory just contains an <code class="inline-code" data-themeable>index.js</code>, then <code class="inline-code" data-themeable>pages/index.js</code> will correspond to the <code class="inline-code" data-themeable>/</code> route.</p>
<p>If I want to add a blog post I can simply create <code class="inline-code" data-themeable>posts/first-post.js</code> in <code class="inline-code" data-themeable>pages</code> with content similar to:</p>
<div class="code-block-wrapper" data-themeable><div><pre class="code-block"><code class="language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FirstPost</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>First Post<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
}</code></pre></div></div>
<p>Now navigating to <code class="inline-code" data-themeable>myblog.com/posts/first-post</code> will display that page.</p>
<p>Note: the component can have any name, but you must export it as a <code class="inline-code" data-themeable>default</code> export.</p>
<h2 class="post-body-header">
              <a name="link-component" href="#link-component">Link Component</a>
            </h2><p>To link between pages you use the <code class="inline-code" data-themeable>&lt;Link&gt;</code> component.</p>
<p>Instead of using <code class="inline-code" data-themeable>&lt;a href&quot;...&quot;&gt;</code> you use <code class="inline-code" data-themeable>&lt;Link href=&quot;...&quot;&gt;</code> and put an <code class="inline-code" data-themeable>&lt;a&gt;</code> tag inside.</p>
<p>So to link back to the homepage from the <code class="inline-code" data-themeable>first-post</code> page edit <code class="inline-code" data-themeable>pages/posts/first-post.js</code> to be:</p>
<div class="code-block-wrapper" data-themeable><div><pre class="code-block"><code class="language-js"><span class="hljs-keyword">import</span> Link <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/link&#x27;</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FirstPost</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>First Post<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>Back to home<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}</code></pre></div></div>
<h2 class="post-body-header">
              <a name="client-side-navigation" href="#client-side-navigation">Client-Side Navigation</a>
            </h2><p>This part of the tutorial is when I started getting excited about Next.js because this section introduces some of the cool stuff Next.js does to optimize application performance.</p>
<p>Next.js uses <strong>client-side navigation</strong> which as the tutorial states means that “page transition happens using JavaScript, which is faster than the default navigation done by the browser [(which always reloads the entire page)]”.</p>
<p>Next.js performs <strong>code splitting</strong> automatically so that each page only loads what is necessary. So when you visit a new page only the code for that page is served, the code for other pages is not.</p>
<p>As a side benefit only loading the code of the page you requested isolates that page so that if it throws an error the rest of the application still works.</p>
<p>In production Next.js also performs <strong>prefetching</strong>. Whenever a <code class="inline-code" data-themeable>&lt;Link&gt;</code> component <em>appears in the browser’s viewport</em>, Next.js prefetches the code for the linked page in the background. This way when you click on the link the code for the page will already be loaded making the page transition extra fast.</p>
<h1 class="post-body-header">
              <a name="assets-metadata-and-css" href="#assets-metadata-and-css">Assets, Metadata, and CSS</a>
            </h1><h2 class="post-body-header">
              <a name="assets" href="#assets">Assets</a>
            </h2><p>Next.js serves <strong>static assets</strong> under the top-level <code class="inline-code" data-themeable>public</code> directory.</p>
<h3 class="post-body-header">
              <a name="image-component" href="#image-component">Image Component</a>
            </h3><p>Next.js provides an <code class="inline-code" data-themeable>Image</code> component to handle things the regular HTML <code class="inline-code" data-themeable>img</code> tag doesn’t.</p>
<p>With the <code class="inline-code" data-themeable>Image</code> component, Next.js:</p>
<ul>
<li>Supports Image Optimization by default, which allows resizing and optimizing images in modern formats</li>
<li>On-demand image optimization. Images are optimized when users request them so the number of images the app serves doesn’t impact build time.</li>
<li>Lazy loading of images by default. Images are only loaded when they scroll into the viewport.</li>
<li>Images are loaded in a way to avoid <a href="https://web.dev/cls/" title="" class="md-link" data-themeable>Cumulative Layout Shift</a>.</li>
</ul>
<p>Here’s an example using the <code class="inline-code" data-themeable>Image</code> component:</p>
<div class="code-block-wrapper" data-themeable><div><pre class="code-block"><code class="language-js"><span class="hljs-keyword">import</span> Image <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/image&#x27;</span>

<span class="hljs-keyword">const</span> YourComponent = <span class="hljs-function">() =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
    <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/images/profile.jpg&quot;</span> // <span class="hljs-attr">Route</span> <span class="hljs-attr">of</span> <span class="hljs-attr">the</span> <span class="hljs-attr">image</span> <span class="hljs-attr">file</span>
    <span class="hljs-attr">height</span>=<span class="hljs-string">{144}</span> // <span class="hljs-attr">Desired</span> <span class="hljs-attr">size</span> <span class="hljs-attr">with</span> <span class="hljs-attr">correct</span> <span class="hljs-attr">aspect</span> <span class="hljs-attr">ratio</span>
    <span class="hljs-attr">width</span>=<span class="hljs-string">{144}</span> // <span class="hljs-attr">Desired</span> <span class="hljs-attr">size</span> <span class="hljs-attr">with</span> <span class="hljs-attr">correct</span> <span class="hljs-attr">aspect</span> <span class="hljs-attr">ratio</span>
    <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Your Name&quot;</span>
  /&gt;</span></span>
)</code></pre></div></div>
<h2 class="post-body-header">
              <a name="metadata" href="#metadata">Metadata</a>
            </h2><p>Next.js has a built in React component named <code class="inline-code" data-themeable>&lt;Head&gt;</code> (uppercase H) which you can use like the regular <code class="inline-code" data-themeable>&lt;head&gt;</code> HTML tag:</p>
<div class="code-block-wrapper" data-themeable><div><pre class="code-block"><code class="language-js"><span class="hljs-keyword">import</span> Head <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/head&#x27;</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FirstPost</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>First Post<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Head</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>First Post<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>Back to home<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}</code></pre></div></div>
<h2 class="post-body-header">
              <a name="css-styling" href="#css-styling">CSS Styling</a>
            </h2><p>Next.js supports multiple CSS-in-JS libraries, you can also import <code class="inline-code" data-themeable>.css</code> and <code class="inline-code" data-themeable>.scss</code> files.</p>
<h2 class="post-body-header">
              <a name="layout-component" href="#layout-component">Layout Component</a>
            </h2><p>One way of applying style to elements in a React Component is to use the <code class="inline-code" data-themeable>Layout</code> component provided by Next.js, along with CSS Modules.</p>
<p>CSS Modules:</p>
<ul>
<li>Allow you to import CSS in a React Component.</li>
<li>Are CSS files that must end in <code class="inline-code" data-themeable>.module.css</code>.</li>
<li>Prevent class name collisions by automatically generating unique class names, scoping style at the component level.</li>
<li>Are subject to Next.js’s code splitting feature, ensuring that only the CSS that is needed is loaded.</li>
</ul>
<p>An example for how to use CSS Modules:</p>
<ol>
<li>Create a <code class="inline-code" data-themeable>components</code> directory at the root of your project</li>
<li>Create a <code class="inline-code" data-themeable>layout.module.css</code> file in the <code class="inline-code" data-themeable>components</code> directory with the style you want to apply, such as:</li>
</ol>
<div class="code-block-wrapper" data-themeable><div><pre class="code-block"><code class="language-css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">36rem</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">1rem</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">3rem</span> auto <span class="hljs-number">6rem</span>;
}</code></pre></div></div>
<ol start="3">
<li>Create a <code class="inline-code" data-themeable>layout.js</code> file in <code class="inline-code" data-themeable>components</code> with content:</li>
</ol>
<div class="code-block-wrapper" data-themeable><div><pre class="code-block"><code class="language-js"><span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./layout.module.css&#x27;</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Layout</span>(<span class="hljs-params">{ children }</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.container}</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}</code></pre></div></div>
<ol start="4">
<li>Wrap the elements you want to style in your React component with the <code class="inline-code" data-themeable>Layout</code> component:</li>
</ol>
<div class="code-block-wrapper" data-themeable><div><pre class="code-block"><code class="language-js"><span class="hljs-keyword">import</span> Head <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/head&#x27;</span>
<span class="hljs-keyword">import</span> Link <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/link&#x27;</span>
<span class="hljs-keyword">import</span> Layout <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../components/layout&#x27;</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FirstPost</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Layout</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>First Post<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Head</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>First Post<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>Back to home<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Layout</span>&gt;</span></span>
  )
}</code></pre></div></div>
<p>CSS Modules are useful for component-level styles, however Next.js supports another method to handle global CSS.</p>
<h2 class="post-body-header">
              <a name="global-styles" href="#global-styles">Global Styles</a>
            </h2><p>Next.js has an <code class="inline-code" data-themeable>App</code> component it uses to initialize pages. This component can be overridden to control page initialization.</p>
<p>To load <a href="https://nextjs.org/docs/basic-features/built-in-css-support#adding-a-global-stylesheet" title="" class="md-link" data-themeable>global CSS</a> files, override the <code class="inline-code" data-themeable>App</code> component by defining a file called <code class="inline-code" data-themeable>pages/_app.js</code>:</p>
<div class="code-block-wrapper" data-themeable><div><pre class="code-block"><code class="language-js"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../styles/global.css&#x27;</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params">{ Component, pageProps }</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> {<span class="hljs-attr">...pageProps</span>} /&gt;</span></span>
}</code></pre></div></div>
<p>Notes: </p>
<ul>
<li>In Next.js, <strong><code class="inline-code" data-themeable>pages/_app.js</code> is the only place you can import global CSS</strong>.</li>
<li>The global CSS file can be placed anywhere (here it’s in a top-level directory called <code class="inline-code" data-themeable>styles</code>).</li>
<li>You need to restart the development server when adding <code class="inline-code" data-themeable>pages/_app.js</code>.</li>
</ul>
<h1 class="post-body-header">
              <a name="pre-rendering-and-data-fetching" href="#pre-rendering-and-data-fetching">Pre-rendering and Data Fetching</a>
            </h1><h2 class="post-body-header">
              <a name="pre-rendering" href="#pre-rendering">Pre-rendering</a>
            </h2><p><strong>Pre-rendering</strong> is one of the most important concepts in Next.js. </p>
<p>Pre-rendering results in better performance and SEO.</p>
<p>Next.js pre-renders every page by default.</p>
<p>Next.js generates HTML for each page in advance instead of having it done by client-side JavaScript.</p>
<p>If you disable JavaScript you will still be able to see the UI of a Next.js app because Next.js pre-renders the app into static HTML.</p>
<p>The above doesn’t imply that disabling JavaScript means you can still <em>interact</em> with a Next.js app because:</p>
<blockquote>
<p>“Each generated HTML is associated with minimal JavaScript code necessary for that page. When a page is loaded by the browser, its JavaScript code runs and makes the page fully interactive. (This process is called <strong>hydration</strong>.)”</p>
</blockquote>
<h2 class="post-body-header">
              <a name="two-forms-of-pre-rendering" href="#two-forms-of-pre-rendering">Two Forms of Pre-rendering</a>
            </h2><p>Next.js has two forms of pre-rendering: <a href="https://nextjs.org/docs/basic-features/pages#static-generation-recommended" title="" class="md-link" data-themeable>Static Generation</a> and <a href="https://nextjs.org/docs/basic-features/pages#server-side-rendering" title="" class="md-link" data-themeable>Server-side Rendering</a>.</p>
<p>The difference between the two forms of pre-rendering is in <strong>when</strong> Next.js generates the HTML:</p>
<ul>
<li>Static Generation: the HTML is generated at <strong>build time</strong> (and reused on each request).</li>
<li>Server-side Rendering: the HTML is generated on <strong>each request</strong>.</li>
</ul>
<p>Next.js lets you choose which pre-rendering form to use for each page.</p>
<p>Note: in development, every page is rendered on each request (including those that use Static Generation).</p>
<p>Next.js recommends using Static Generation whenever possible.</p>
<h2 class="post-body-header">
              <a name="static-generation-with-and-without-data" href="#static-generation-with-and-without-data">Static Generation with and without Data</a>
            </h2><p>Static Generation can be done with and without data.</p>
<p>For pages without data, there’s nothing much to it, Next.js just generates the HTML for the pages at build time.</p>
<p>Obviously the above is not always the case, sometimes you will need to fetch external data before a page can be statically generated. Next.js supports <a href="https://nextjs.org/docs/basic-features/pages#static-generation-with-data" title="" class="md-link" data-themeable>Static Generation with data</a> out of the box.</p>
<p>How is this done? When exporting a page component you can export an <code class="inline-code" data-themeable>async</code> function called <code class="inline-code" data-themeable>getStaticProps</code> which:</p>
<ul>
<li>Runs at build time in production.</li>
<li>Allows you to fetch external data and send it as props to the page.</li>
</ul>
<div class="code-block-wrapper" data-themeable><div><pre class="code-block"><code class="language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Home</span>(<span class="hljs-params">props</span>) </span>{ ... }

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getStaticProps</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// Get external data from the file system, API, DB, etc.</span>
  <span class="hljs-keyword">const</span> data = ...

  <span class="hljs-comment">// The value of the `props` key will be</span>
  <span class="hljs-comment">//  passed to the `Home` component</span>
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">props</span>: ...
  }
}</code></pre></div></div>
<p>Note: in development, <code class="inline-code" data-themeable>getStaticProps</code> runs on each request.</p>
<h2 class="post-body-header">
              <a name="fetching-data-at-request-time" href="#fetching-data-at-request-time">Fetching Data at Request Time</a>
            </h2><p>As mentioned above, if you need to fetch data at request time use Server-side Rendering.</p>
<p><code class="inline-code" data-themeable>getStaticProps</code> is only run at build time in production and so only runs server-side and never on the client.</p>
<p>You must export <code class="inline-code" data-themeable>getServerSideProps</code> in order to use Server-side Rendering.</p>
<div class="code-block-wrapper" data-themeable><div><pre class="code-block"><code class="language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getServerSideProps</span>(<span class="hljs-params">context</span>) </span>{
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">props</span>: {
      <span class="hljs-comment">// props for your component</span>
    }
  }
}</code></pre></div></div>
<p>The <code class="inline-code" data-themeable>context</code> parameter contains request specific parameters.</p>
<h3 class="post-body-header">
              <a name="client-side-rendering" href="#client-side-rendering">Client-side Rendering</a>
            </h3><p><a href="https://nextjs.org/docs/basic-features/data-fetching#fetching-data-on-the-client-side" title="" class="md-link" data-themeable>Client-side Rendering</a> can be used when you do not need to pre-render page data. This approach involves:</p>
<ul>
<li>Statically generating parts of the page that do not require external data.</li>
<li>Once the page loads, fetch the data from the client using JavaScript and populate the remaining parts.</li>
</ul>
<p>Example uses of this approach are for user dashboard pages because:</p>
<ul>
<li>The page is private so SEO is not relevant and the page doesn’t need to be pre-rendered.</li>
<li>The data is updated frequently, which means the page must be updated on every request.</li>
</ul>
<h3 class="post-body-header">
              <a name="swr" href="#swr">SWR</a>
            </h3><p>There’s a React hook for data fetching called <a href="https://swr.vercel.app/" title="" class="md-link" data-themeable>SWR</a> which Next.js highly recommends for fetching data on the client side because it handles lots of things such as caching, revalidation, focus tracking…</p>
<div class="code-block-wrapper" data-themeable><div><pre class="code-block"><code class="language-js"><span class="hljs-keyword">import</span> useSWR <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;swr&#x27;</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Profile</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> { data, error } = useSWR(<span class="hljs-string">&#x27;/api/user&#x27;</span>, fetch)

  <span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>failed to load<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  <span class="hljs-keyword">if</span> (!data) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>hello {data.name}!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}</code></pre></div></div>
<h1 class="post-body-header">
              <a name="dynamic-routes" href="#dynamic-routes">Dynamic Routes</a>
            </h1><h2 class="post-body-header">
              <a name="page-path-depends-on-external-data" href="#page-path-depends-on-external-data">Page Path Depends on External Data</a>
            </h2><p>Previously we saw that with <code class="inline-code" data-themeable>getStaticProps</code> we could fetch data required to render a page. Now we’ll see how we can do something similar for the page path using another <code class="inline-code" data-themeable>async</code> function called <code class="inline-code" data-themeable>getStaticPaths</code>.</p>
<p>If you want to statically generate a page at a path called <code class="inline-code" data-themeable>/posts/&lt;id&gt;</code> where <code class="inline-code" data-themeable>&lt;id&gt;</code> can be dynamic, then create a page at <code class="inline-code" data-themeable>/pages/posts/[id].js</code> containing:</p>
<ul>
<li>A React component to render the page.</li>
<li><code class="inline-code" data-themeable>getStaticPaths</code> which returns an array of possible values for <code class="inline-code" data-themeable>id</code>.</li>
<li><code class="inline-code" data-themeable>getStaticProps</code> which fetches necessary data for a blog post with a given <code class="inline-code" data-themeable>id</code>.</li>
</ul>
<div class="code-block-wrapper" data-themeable><div><pre class="code-block"><code class="language-js"><span class="hljs-keyword">import</span> Layout <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../components/layout&#x27;</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Post</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Layout</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">Layout</span>&gt;</span></span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getStaticPaths</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// Return a list of possible value for id</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getStaticProps</span>(<span class="hljs-params">{ params }</span>) </span>{
  <span class="hljs-comment">// Fetch necessary data for the blog post using params.id</span>
}   </code></pre></div></div>
<h2 class="post-body-header">
              <a name="dynamic-routes-details" href="#dynamic-routes-details">Dynamic Routes Details</a>
            </h2><p>In <strong>development</strong> <code class="inline-code" data-themeable>getStaticPaths</code> runs on every request, in <strong>production</strong> it runs at build time.</p>
<p>Dynamic routes can be extended to catch all paths by adding three dots inside the brackets:<br><code class="inline-code" data-themeable>pages/posts/[...id].js</code> matches <code class="inline-code" data-themeable>/posts/a</code> as well as <code class="inline-code" data-themeable>/posts/a/b</code> and <code class="inline-code" data-themeable>/posts/a/b/c</code> and so on.</p>
<h1 class="post-body-header">
              <a name="conclusion" href="#conclusion">Conclusion</a>
            </h1><p>After my first encounter with Next.js I was left feeling excited to learn more and use it in future projects.</p>
<p>Next.js does so many cool things out of the box:</p>
<ul>
<li>code splitting</li>
<li>prefetching</li>
<li>client-side navigation</li>
<li>pre-rendering</li>
<li>dynamic routes</li>
<li>…</li>
</ul>
<p>Next.js also provides React components like the <code class="inline-code" data-themeable>Image</code> component that do even more cool things for you like image optimization.</p>
<p>I forget why I chose to write my own static site generator to make this website… I’m thinking I might have to refactor the codebase to use Next.js now!</p>

</div><footer id="footer">
  <small>All rights reserved © Alessio Palladino 2024</small>
</footer>
    </div>
    <script>"use strict";!function(){var r=null;function t(){localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?l("dark"):window.matchMedia("(prefers-color-scheme: light)").matches&&l("light"))}function n(){var e=document.getElementById("navbar");return e&&null!==(e=e.dataset.theme)&&void 0!==e?e:null}function a(){var e=localStorage.getItem("theme");e&&e!==n()&&l(e)}function l(e){if(r){for(var t=0;t<r.length;t++){var n=r[t];(n instanceof HTMLElement||n instanceof SVGElement)&&(n.dataset.theme=e)}var a=document.getElementById("theme-link"),l=(null===(l=null==a?void 0:a.getAttribute("href"))||void 0===l?void 0:l.split("style/")[0])+"style/";"light"===e?a&&a.setAttribute("href",l+"github.css"):a&&a.setAttribute("href",l+"tomorrow-night-bright.css"),a=e,(l=document.getElementById("switch-theme-btn"))&&l instanceof HTMLInputElement&&(l.checked="dark"===a)}}!function(){r=document.querySelectorAll(" [data-themeable] "),t(),a(),function(){try{window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(e){t()})}catch(e){try{window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){t()})}catch(e){console.error(e)}}}();var e=document.getElementById("switch-theme-btn");null!=e&&e.addEventListener("click",function(){var e,t=null;localStorage.getItem("theme")&&"dark"===localStorage.getItem("theme")?t="light":localStorage.getItem("theme")&&"light"===localStorage.getItem("theme")?t="dark":localStorage.getItem("theme")||(t=(e=n())&&"dark"==e?"light":"dark"),t=null!=t?t:"light",localStorage.setItem("theme",t),a()})}(),setInterval(function(){a()},2e3)}()</script>

</body>

</html>