<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/1edab12fd64474cc.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/fadc07fb3bbae6bd.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-d1479157349f8417.js"/><script src="/_next/static/chunks/4bd1b696-4039e97aa73f48b0.js" async=""></script><script src="/_next/static/chunks/517-f70cc84c7cd2829a.js" async=""></script><script src="/_next/static/chunks/main-app-edf91be93d3a5361.js" async=""></script><script src="/_next/static/chunks/173-ecbbcb5462b2e767.js" async=""></script><script src="/_next/static/chunks/app/blog/how-i-handle-syntax-highlighting/page-1dbf4db3791e0513.js" async=""></script><script src="/_next/static/chunks/app/layout-e1b45fa63c0b2725.js" async=""></script><meta name="next-size-adjust" content=""/><meta name="author" content="Alessio Palladino"/><meta id="meta-theme-color" name="theme-color"/><title>How I Handle Syntax Highlighting • Alessio Palladino</title><meta name="description" content="How to handle syntax highlighting using Next.js&#x27;s App Router, MDX, and highlight.js"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="32x32"/><link id="dark-css" rel="stylesheet" href="/dark.css"/><link id="light-css" rel="stylesheet" href="/light.css"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_e8ce0c"><script src="/theme.js"></script><div class="flex justify-center px-4"><div class="flex flex-col min-h-dvh max-w-screen-lg w-full"><div class="navbar"><div class="flex-1"><a class="btn btn-ghost no-animation text-xl" href="/">Home</a></div><div class="flex-none pr-2"><a class="btn btn-ghost no-animation text-xl" href="/about">About</a><a class="btn btn-ghost no-animation text-xl" href="/blog">Blog</a></div><button class="dark-mode-btn btn-ghost"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon moon-icon"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg></button></div><div><div class="flex justify-center py-8"><div class="max-w-screen-md w-full"><div class="pb-4"><a class="flex items-center justify-center size-[48px] rounded-full btn-ghost" href="/blog"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg></a></div><article class="prose prose-lg"><h1>How I Handle Syntax Highlighting</h1>
<div><small><i>Published<!-- --> <!-- -->March 1st, 2025</i></small></div>
<p>For my first post of 2025, I&#x27;ll go over how I handle syntax highlighting on my blog. Or in other words,
how to make <a href="https://highlightjs.org/">highlight.js</a>, <a href="https://mdxjs.com/">MDX</a>, and <a href="https://nextjs.org/docs/app">Next.js&#x27;s App Router</a> play together nicely.</p>
<h2 id="a-little-background" class="styles_linktitle__p04j4"><a href="#a-little-background" class="no-underline">A Little Background</a></h2>
<p>The idea for my blog is to have it be statically generated, since most of the content is itself static.</p>
<p>Having pre-built pages generally makes the entire experience faster, and going along with this idea,
I also leverage React Server Components using Next&#x27;s App Router.
These components require very little work on the client:
they render exclusively on the server, are not included in the JS bundle, never hydrate, and never re-render.
I always refer to Josh Comeau&#x27;s <a href="https://www.joshwcomeau.com/react/server-components/">Making Sense of React Server Components</a> when I need a refresher on RSCs.</p>
<p>I also use MDX to write my blog posts. This allows me to use markdown in combination with React components in the same file, and therefore in the same page!</p>
<h2 id="the-problem" class="styles_linktitle__p04j4"><a href="#the-problem" class="no-underline">The Problem</a></h2>
<p>Sounds great right? But the problem is that MDX does not support syntax highlighting. I wanted a simple way to apply syntax highlighting to the code blocks in my articles,
while avoiding any extra work on the client.</p>
<p>I&#x27;ve used highlight.js in the past and have been extremely satisfied with its performance and DX, so I set out to integrate it once more in my application.
All I want to do is specify a code block using the triple backtick notation in my <code>.mdx</code> file, then MDX and highlight.js should take care of it from there.</p>
<h2 id="a-solution" class="styles_linktitle__p04j4"><a href="#a-solution" class="no-underline">A Solution</a></h2>
<p>Let&#x27;s take a look at a possible solution together.</p>
<p>In the end, it&#x27;s fairly simple.
We&#x27;ll simply be using the highlights.js <code>highlight()</code> method to output the required html in the <code>useMDXComponents()</code> hook.
However, there are some small implementation details that are kind of tricky.</p>
<h3 id="the-highlight-method" class="styles_linktitle__p04j4"><a href="#the-highlight-method" class="no-underline">The highlight() Method</a></h3>
<p>The <code>highlight()</code> method takes your code as a string and returns an html string with highlighting markup.</p>
<p>We&#x27;ll need to pass two arguments to <code>highlight()</code>: the code, and the language it&#x27;s written in.</p>
<pre class="break-words code-block text-wrap"><code class="language-ts hljs"><span class="hljs-keyword">import</span> hljs <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;highlight.js&quot;</span>

<span class="hljs-keyword">const</span> html = hljs.<span class="hljs-title function_">highlight</span>(<span class="hljs-string">&#x27;const greeting = &quot;Hello, World!&quot;&#x27;</span>, {
  <span class="hljs-attr">language</span>: <span class="hljs-string">&quot;ts&quot;</span>,
}).<span class="hljs-property">value</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(html)
</code></pre>
<p>The output html will be:</p>
<pre class="break-words code-block text-wrap"><code class="language-text hljs">&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; greeting = &lt;span class=&quot;hljs-string&quot;&gt;&amp;quot;Hello, World!&amp;quot;&lt;/span&gt;
</code></pre>
<p>Notice the CSS classes highlight.js uses to apply syntax highlighting: <code>hljs-keyword</code>, <code>hljs-string</code>...
For this to work, you&#x27;ll need to include a highlight.js stylesheet.
There are plenty of themes to choose from on the
<a href="https://github.com/highlightjs/highlight.js/tree/main/src/styles">highlight.js GitHub repo</a>.</p>
<h3 id="configuring-the-usemdxcomponents-hook" class="styles_linktitle__p04j4"><a href="#configuring-the-usemdxcomponents-hook" class="no-underline">Configuring the useMDXComponents() Hook</a></h3>
<p>The Next.js documentation has a great page on <a href="https://nextjs.org/docs/pages/building-your-application/configuring/mdx">configuring MDX</a>.</p>
<p>As stated in the docs, to use MDX with the Next App Router, we need an <code>mdx-components.tsx</code> file.
This is where we have our <code>useMDXComponents()</code> hook. Remember, at its core MDX takes your markdown file and transforms it into html.
This hook basically lets you tell MDX how to process the different html tags it comes across for any given file.</p>
<p>When MDX comes across the markdown for a code block, it&#x27;ll render a <code>&lt;pre&gt;</code> html tag wrapping a <code>&lt;code&gt;</code> tag.
It&#x27;s at this point that we&#x27;ll want to call the<code>highlight()</code> method:</p>
<pre class="break-words code-block text-wrap"><code class="language-tsx hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMDXComponents</span>(<span class="hljs-params"><span class="hljs-attr">components</span>: <span class="hljs-title class_">MDXComponents</span></span>): <span class="hljs-title class_">MDXComponents</span> {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> call highlight() method here</span>
    <span class="hljs-attr">pre</span>: <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">pre</span> {<span class="hljs-attr">...props</span>} /&gt;</span></span>,
    ...components,
  }
}
</code></pre>
<p>Given a <code>const greeting = &quot;Hello, World!&quot;</code> code block, if we inspect the <code>props</code> object we&#x27;ll see something that looks like this:</p>
<pre><code>{
  children: {
    &#x27;$$typeof&#x27;: Symbol(react.transitional.element),
    type: &#x27;code&#x27;,
    key: null,
    props: {
      className: &#x27;language-ts&#x27;,
      children: &#x27;const greeting = &quot;Hello, World!&quot;\n&#x27;
    },
    _owner: {
      name: &#x27;_createMdxContent&#x27;,
      env: &#x27;Server&#x27;,
      key: null,
      owner: [Object],
      props: [Object]
    },
    _store: {}
  }
}
</code></pre>
<p>As you can see we want to access <code>props.children.props.className</code> to get the language and <code>props.children.props.children</code> to get the code itself.</p>
<p><code>props.children.props.className</code> is a string that looks like <code>language-&lt;language&gt;</code>.
Where <code>&lt;language&gt;</code> is the language specified in the markdown for the code block.
We&#x27;ll want to <code>split()</code> the string to get the language without the prepended <code>language-</code>, and pass it to the <code>highlight()</code> method.
The full <code>language-&lt;language&gt;</code> string is still needed because it&#x27;s a higlight.js class name used
to apply the CSS necessary for syntax highlighting.</p>
<h4 id="props-type-problem" class="styles_linktitle__p04j4"><a href="#props-type-problem" class="no-underline">Props Type Problem</a></h4>
<p>Unfortunately, the type of <code>props</code> is not accurate enough for our needs:</p>
<pre class="break-words code-block text-wrap"><code class="language-ts hljs"><span class="hljs-title class_">DetailedHTMLProps</span>&lt;<span class="hljs-title class_">HTMLAttributes</span>&lt;<span class="hljs-title class_">HTMLPreElement</span>&gt;, <span class="hljs-title class_">HTMLPreElement</span>&gt;
</code></pre>
<p>We&#x27;re missing the <code>prop.children.props.className</code> and <code>prop.children.props.children</code> properties.</p>
<p>Additionally, there could be other instances where MDX needs to render a <code>&lt;pre&gt;</code> tag, and we don&#x27;t want to apply syntax highlighting in those cases.</p>
<p>This is an apt situation to use a library like <code>zod</code> to: define a schema for our props object, assert we&#x27;re getting
a code block, and act accordingly.</p>
<p>Given the props we expect to receive in case of a code block, we can define the following schema:</p>
<pre class="break-words code-block text-wrap"><code class="language-ts hljs"><span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;zod&quot;</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> codeBlockPropsSchema = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">children</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">type</span>: z.<span class="hljs-title function_">literal</span>(<span class="hljs-string">&quot;code&quot;</span>),
    <span class="hljs-attr">props</span>: z.<span class="hljs-title function_">object</span>({
      <span class="hljs-attr">className</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;language-&quot;</span>),
      <span class="hljs-attr">children</span>: z.<span class="hljs-title function_">string</span>(),
    }),
  }),
})
</code></pre>
<h2 id="putting-it-all-together" class="styles_linktitle__p04j4"><a href="#putting-it-all-together" class="no-underline">Putting it all Together</a></h2>
<p>Now we&#x27;re ready to put everything together. We&#x27;ll return a <code>&lt;pre&gt;</code> tag wrapping a <code>&lt;code&gt;</code> tag where we&#x27;ll need
to use the <code>dangerouslySetInnerHTML</code> prop to correctly render the html outputted by the <code>highlight()</code> method.</p>
<p>Another detail is that <code>highlight()</code> can throw an error, if it does we abandon syntax highlighting and just return the original <code>&lt;pre&gt;</code> tag</p>
<p>Here&#x27;s the resulting <code>mdx-components.tsx</code> file:</p>
<pre class="break-words code-block text-wrap"><code class="language-tsx hljs"><span class="hljs-keyword">import</span> { codeBlockPropsSchema } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/schemas&quot;</span>
<span class="hljs-keyword">import</span> hljs <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;highlight.js&quot;</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">MDXComponents</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;mdx/types&quot;</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMDXComponents</span>(<span class="hljs-params"><span class="hljs-attr">components</span>: <span class="hljs-title class_">MDXComponents</span></span>): <span class="hljs-title class_">MDXComponents</span> {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">pre</span>: <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> result = codeBlockPropsSchema.<span class="hljs-title function_">safeParse</span>(props)

      <span class="hljs-keyword">if</span> (result.<span class="hljs-property">error</span>) {
        <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">pre</span> {<span class="hljs-attr">...props</span>} /&gt;</span></span>
      }

      <span class="hljs-keyword">const</span> { className, <span class="hljs-attr">children</span>: code } = result.<span class="hljs-property">data</span>.<span class="hljs-property">children</span>.<span class="hljs-property">props</span>
      <span class="hljs-keyword">const</span> language = className.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;-&quot;</span>)[<span class="hljs-number">1</span>]

      <span class="hljs-keyword">let</span> html = <span class="hljs-literal">undefined</span>
      <span class="hljs-keyword">try</span> {
        html = hljs.<span class="hljs-title function_">highlight</span>(code, {
          <span class="hljs-attr">language</span>: language,
        }).<span class="hljs-property">value</span>
      } <span class="hljs-keyword">catch</span> {
        <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">pre</span> {<span class="hljs-attr">...props</span>} /&gt;</span></span>
      }

      <span class="hljs-keyword">return</span> (
        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">pre</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">code</span>
            <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">className</span>} <span class="hljs-attr">hljs</span>`}
            <span class="hljs-attr">dangerouslySetInnerHTML</span>=<span class="hljs-string">{{</span>
              <span class="hljs-attr">__html:</span> <span class="hljs-attr">html</span>,
            }}
          &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span></span>
      )
    },
    ...components,
  }
}
</code></pre>
<p>Notice the extra <code>hjls</code> class I added, that class is not included in the html outputted by <code>highlight()</code>,
but it is needed to set the text color for a given highlight.js theme.
Now, remember to include a highlight.js stylesheet in your application and you&#x27;re good to go!</p>
<h2 id="conclusion" class="styles_linktitle__p04j4"><a href="#conclusion" class="no-underline">Conclusion</a></h2>
<p>In my post on implementing dark mode I talked about how to toggle stylesheets based on the current theme, if you&#x27;re interested, see
<a href="/blog/dark-mode-a-not-so-simple-story">Dark Mode, a Not so Simple Story</a>.</p>
<p>I have to say I&#x27;m really happy with the result here. All the work gets done on the client and the resulting code blocks look great!
However, I think my current implementation can be improved. It was the easiest solution to integrate with the knowledge I had at the time I was creating this blog, but I know there&#x27;s more out there.<br/>
<!-- -->In these cases I need to remind myself what the <em>purpose</em> of my blog is. And that&#x27;s the <strong>content</strong>.
I don&#x27;t want to spend too much time implementing the perfect syntax highlighting system, supporting features that don&#x27;t
add much to my <em>WHY</em>.<br/>
<!-- -->That being said, I&#x27;m still curious about exploring plugins like
<a href="https://github.com/rehype-pretty/rehype-pretty-code?tab=readme-ov-file">rehype-pretty-code</a>
which offer cool features like line numbers, line highlighting, inline code highlighting, and more!</p></article></div></div></div></div></div><script src="/_next/static/chunks/webpack-d1479157349f8417.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[8173,[\"173\",\"static/chunks/173-ecbbcb5462b2e767.js\",\"770\",\"static/chunks/app/blog/how-i-handle-syntax-highlighting/page-1dbf4db3791e0513.js\"],\"\"]\n3:I[3143,[\"173\",\"static/chunks/173-ecbbcb5462b2e767.js\",\"177\",\"static/chunks/app/layout-e1b45fa63c0b2725.js\"],\"ThemeSwitcher\"]\n4:I[5244,[],\"\"]\n5:I[3866,[],\"\"]\n7:I[6213,[],\"OutletBoundary\"]\n9:I[6213,[],\"MetadataBoundary\"]\nb:I[6213,[],\"ViewportBoundary\"]\nd:I[4835,[],\"\"]\n:HL[\"/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/1edab12fd64474cc.css\",\"style\"]\n:HL[\"/_next/static/css/fadc07fb3bbae6bd.css\",\"style\"]\n6:Td0c,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { codeBlockPropsSchema } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@/schemas\u0026quot;\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e hljs \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;highlight.js\u0026quot;\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003etype\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eMDXComponents\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;mdx/types\u0026quot;\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003euseMDXComponents\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-attr\"\u003ecomponents\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eMDXComponents\u003c/span\u003e\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eMDXComponents\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n    \u003cspan class=\"hljs-attr\"\u003epre\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eprops\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = codeBlockPropsSchema.\u003cspan class=\"hljs-title function_\"\u003esafeParse\u003c/span\u003e(props)\n\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (result.\u003cspan class=\"hljs-property\"\u003eerror\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003epre\u003c/span\u003e {\u003cspan class=\"hljs-attr\"\u003e...props\u003c/span\u003e} /\u0026gt;\u003c/span\u003e\u003c/span\u003e\n      }\n\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { className, \u003cspan class=\"hljs-attr\"\u003echildren\u003c/span\u003e: code } = result.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003echildren\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eprops\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e language = className.\u003cspan class=\"hljs-title function_\"\u003esplit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;-\u0026quot;\u003c/span\u003e)[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e]\n\n      \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e html = \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n        html = hljs.\u003cspan class=\"hljs-title function_\"\u003ehighlight\u003c/span\u003e(code, {\n          \u003cspan class=\"hljs-attr\"\u003elanguage\u003c/span\u003e: language,\n        }).\u003cspan class=\"hljs-property\"\u003evalue\u003c/span\u003e\n      } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003epre\u003c/span\u003e {\u003cspan class=\"hljs-attr\"\u003e...props\u003c/span\u003e} /\u0026gt;\u003c/span\u003e\u003c/span\u003e\n      }\n\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n        \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003epre\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ecode\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e`${\u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e} \u003cspan class=\"hljs-attr\"\u003ehljs\u003c/span\u003e`}\n            \u003cspan class=\"hljs-attr\"\u003edangerouslySetInnerHTML\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{{\u003c/span\u003e\n              \u003cspan class=\"hljs-attr\"\u003e__html:\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ehtml\u003c/span\u003e,\n            }}\n          \u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ecode\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003epre\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n      )\n    },\n    ...components,\n  }\n}\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"8HfPho_Lzm91-6fkioNti\",\"p\":\"\",\"c\":[\"\",\"blog\",\"how-i-handle-syntax-highlighting\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[\"how-i-handle-syntax-highlighting\",{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/1edab12fd64474cc.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"data-theme\":\"light\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"meta\",null,{\"name\":\"author\",\"content\":\"Alessio Palladino\"}],[\"$\",\"meta\",null,{\"id\":\"meta-theme-color\",\"name\":\"theme-color\"}],[\"$\",\"link\",null,{\"id\":\"dark-css\",\"rel\":\"stylesheet\",\"href\":\"/dark.css\",\"suppressHydrationWarning\":true}],[\"$\",\"link\",null,{\"id\":\"light-css\",\"rel\":\"stylesheet\",\"href\":\"/light.css\",\"suppressHydrationWarning\":true}]]}],[\"$\",\"body\",null,{\"className\":\"__className_e8ce0c\",\"children\":[[\"$\",\"script\",null,{\"src\":\"/theme.js\"}],[\"$\",\"div\",null,{\"className\":\"flex justify-center px-4\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-col min-h-dvh max-w-screen-lg w-full\",\"children\":[[\"$\",\"div\",null,{\"className\":\"navbar\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L2\",null,{\"className\":\"btn btn-ghost no-animation text-xl\",\"href\":\"/\",\"children\":\"Home\"}]}],[\"$\",\"div\",null,{\"className\":\"flex-none pr-2\",\"children\":[[\"$\",\"$L2\",null,{\"className\":\"btn btn-ghost no-animation text-xl\",\"href\":\"/about\",\"children\":\"About\"}],[\"$\",\"$L2\",null,{\"className\":\"btn btn-ghost no-animation text-xl\",\"href\":\"/blog\",\"children\":\"Blog\"}]]}],[\"$\",\"$L3\",null,{}]]}],[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]}]]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"how-i-handle-syntax-highlighting\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"how-i-handle-syntax-highlighting\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"div\",\"how-i-handle-syntax-highlighting\",{\"children\":[[\"$\",\"title\",null,{\"children\":\"How I Handle Syntax Highlighting • Alessio Palladino\"}],[\"$\",\"meta\",null,{\"name\":\"description\",\"content\":\"How to handle syntax highlighting using Next.js's App Router, MDX, and highlight.js\"}],[\"$\",\"div\",null,{\"className\":\"flex justify-center py-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-screen-md w-full\",\"children\":[[\"$\",\"div\",null,{\"className\":\"pb-4\",\"children\":[\"$\",\"$L2\",null,{\"className\":\"flex items-center justify-center size-[48px] rounded-full btn-ghost\",\"href\":\"/blog\",\"children\":[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":32,\"height\":32,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-arrow-left\",\"children\":[[\"$\",\"path\",\"1l729n\",{\"d\":\"m12 19-7-7 7-7\"}],[\"$\",\"path\",\"x3x0zl\",{\"d\":\"M19 12H5\"}],\"$undefined\"]}]}]}],[\"$\",\"article\",null,{\"className\":\"prose prose-lg\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"How I Handle Syntax Highlighting\"}],\"\\n\",[\"$\",\"div\",null,{\"children\":[\"$\",\"small\",null,{\"children\":[\"$\",\"i\",null,{\"children\":[\"Published\",\" \",\"March 1st, 2025\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"For my first post of 2025, I'll go over how I handle syntax highlighting on my blog. Or in other words,\\nhow to make \",[\"$\",\"a\",null,{\"href\":\"https://highlightjs.org/\",\"children\":\"highlight.js\"}],\", \",[\"$\",\"a\",null,{\"href\":\"https://mdxjs.com/\",\"children\":\"MDX\"}],\", and \",[\"$\",\"a\",null,{\"href\":\"https://nextjs.org/docs/app\",\"children\":\"Next.js's App Router\"}],\" play together nicely.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"a-little-background\",\"className\":\"styles_linktitle__p04j4\",\"children\":[\"$\",\"a\",null,{\"href\":\"#a-little-background\",\"className\":\"no-underline\",\"children\":\"A Little Background\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The idea for my blog is to have it be statically generated, since most of the content is itself static.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Having pre-built pages generally makes the entire experience faster, and going along with this idea,\\nI also leverage React Server Components using Next's App Router.\\nThese components require very little work on the client:\\nthey render exclusively on the server, are not included in the JS bundle, never hydrate, and never re-render.\\nI always refer to Josh Comeau's \",[\"$\",\"a\",null,{\"href\":\"https://www.joshwcomeau.com/react/server-components/\",\"children\":\"Making Sense of React Server Components\"}],\" when I need a refresher on RSCs.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"I also use MDX to write my blog posts. This allows me to use markdown in combination with React components in the same file, and therefore in the same page!\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"the-problem\",\"className\":\"styles_linktitle__p04j4\",\"children\":[\"$\",\"a\",null,{\"href\":\"#the-problem\",\"className\":\"no-underline\",\"children\":\"The Problem\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Sounds great right? But the problem is that MDX does not support syntax highlighting. I wanted a simple way to apply syntax highlighting to the code blocks in my articles,\\nwhile avoiding any extra work on the client.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"I've used highlight.js in the past and have been extremely satisfied with its performance and DX, so I set out to integrate it once more in my application.\\nAll I want to do is specify a code block using the triple backtick notation in my \",[\"$\",\"code\",null,{\"children\":\".mdx\"}],\" file, then MDX and highlight.js should take care of it from there.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"a-solution\",\"className\":\"styles_linktitle__p04j4\",\"children\":[\"$\",\"a\",null,{\"href\":\"#a-solution\",\"className\":\"no-underline\",\"children\":\"A Solution\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Let's take a look at a possible solution together.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"In the end, it's fairly simple.\\nWe'll simply be using the highlights.js \",[\"$\",\"code\",null,{\"children\":\"highlight()\"}],\" method to output the required html in the \",[\"$\",\"code\",null,{\"children\":\"useMDXComponents()\"}],\" hook.\\nHowever, there are some small implementation details that are kind of tricky.\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"the-highlight-method\",\"className\":\"styles_linktitle__p04j4\",\"children\":[\"$\",\"a\",null,{\"href\":\"#the-highlight-method\",\"className\":\"no-underline\",\"children\":\"The highlight() Method\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"highlight()\"}],\" method takes your code as a string and returns an html string with highlighting markup.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"We'll need to pass two arguments to \",[\"$\",\"code\",null,{\"children\":\"highlight()\"}],\": the code, and the language it's written in.\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"break-words code-block text-wrap\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ts hljs\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"hljs-keyword\\\"\u003eimport\u003c/span\u003e hljs \u003cspan class=\\\"hljs-keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;highlight.js\u0026quot;\u003c/span\u003e\\n\\n\u003cspan class=\\\"hljs-keyword\\\"\u003econst\u003c/span\u003e html = hljs.\u003cspan class=\\\"hljs-title function_\\\"\u003ehighlight\u003c/span\u003e(\u003cspan class=\\\"hljs-string\\\"\u003e\u0026#x27;const greeting = \u0026quot;Hello, World!\u0026quot;\u0026#x27;\u003c/span\u003e, {\\n  \u003cspan class=\\\"hljs-attr\\\"\u003elanguage\u003c/span\u003e: \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;ts\u0026quot;\u003c/span\u003e,\\n}).\u003cspan class=\\\"hljs-property\\\"\u003evalue\u003c/span\u003e\\n\\n\u003cspan class=\\\"hljs-variable language_\\\"\u003econsole\u003c/span\u003e.\u003cspan class=\\\"hljs-title function_\\\"\u003elog\u003c/span\u003e(html)\\n\"}}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The output html will be:\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"break-words code-block text-wrap\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-text hljs\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; greeting = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;quot;Hello, World!\u0026amp;quot;\u0026lt;/span\u0026gt;\\n\"}}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Notice the CSS classes highlight.js uses to apply syntax highlighting: \",[\"$\",\"code\",null,{\"children\":\"hljs-keyword\"}],\", \",[\"$\",\"code\",null,{\"children\":\"hljs-string\"}],\"...\\nFor this to work, you'll need to include a highlight.js stylesheet.\\nThere are plenty of themes to choose from on the\\n\",[\"$\",\"a\",null,{\"href\":\"https://github.com/highlightjs/highlight.js/tree/main/src/styles\",\"children\":\"highlight.js GitHub repo\"}],\".\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"configuring-the-usemdxcomponents-hook\",\"className\":\"styles_linktitle__p04j4\",\"children\":[\"$\",\"a\",null,{\"href\":\"#configuring-the-usemdxcomponents-hook\",\"className\":\"no-underline\",\"children\":\"Configuring the useMDXComponents() Hook\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"The Next.js documentation has a great page on \",[\"$\",\"a\",null,{\"href\":\"https://nextjs.org/docs/pages/building-your-application/configuring/mdx\",\"children\":\"configuring MDX\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"As stated in the docs, to use MDX with the Next App Router, we need an \",[\"$\",\"code\",null,{\"children\":\"mdx-components.tsx\"}],\" file.\\nThis is where we have our \",[\"$\",\"code\",null,{\"children\":\"useMDXComponents()\"}],\" hook. Remember, at its core MDX takes your markdown file and transforms it into html.\\nThis hook basically lets you tell MDX how to process the different html tags it comes across for any given file.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"When MDX comes across the markdown for a code block, it'll render a \",[\"$\",\"code\",null,{\"children\":\"\u003cpre\u003e\"}],\" html tag wrapping a \",[\"$\",\"code\",null,{\"children\":\"\u003ccode\u003e\"}],\" tag.\\nIt's at this point that we'll want to call the\",[\"$\",\"code\",null,{\"children\":\"highlight()\"}],\" method:\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"break-words code-block text-wrap\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-tsx hljs\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"hljs-keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003efunction\u003c/span\u003e \u003cspan class=\\\"hljs-title function_\\\"\u003euseMDXComponents\u003c/span\u003e(\u003cspan class=\\\"hljs-params\\\"\u003e\u003cspan class=\\\"hljs-attr\\\"\u003ecomponents\u003c/span\u003e: \u003cspan class=\\\"hljs-title class_\\\"\u003eMDXComponents\u003c/span\u003e\u003c/span\u003e): \u003cspan class=\\\"hljs-title class_\\\"\u003eMDXComponents\u003c/span\u003e {\\n  \u003cspan class=\\\"hljs-keyword\\\"\u003ereturn\u003c/span\u003e {\\n    \u003cspan class=\\\"hljs-comment\\\"\u003e// \u003cspan class=\\\"hljs-doctag\\\"\u003eTODO:\u003c/span\u003e call highlight() method here\u003c/span\u003e\\n    \u003cspan class=\\\"hljs-attr\\\"\u003epre\u003c/span\u003e: \u003cspan class=\\\"hljs-function\\\"\u003e(\u003cspan class=\\\"hljs-params\\\"\u003eprops\u003c/span\u003e) =\u0026gt;\u003c/span\u003e \u003cspan class=\\\"language-xml\\\"\u003e\u003cspan class=\\\"hljs-tag\\\"\u003e\u0026lt;\u003cspan class=\\\"hljs-name\\\"\u003epre\u003c/span\u003e {\u003cspan class=\\\"hljs-attr\\\"\u003e...props\u003c/span\u003e} /\u0026gt;\u003c/span\u003e\u003c/span\u003e,\\n    ...components,\\n  }\\n}\\n\"}}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Given a \",[\"$\",\"code\",null,{\"children\":\"const greeting = \\\"Hello, World!\\\"\"}],\" code block, if we inspect the \",[\"$\",\"code\",null,{\"children\":\"props\"}],\" object we'll see something that looks like this:\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"{\\n  children: {\\n    '$$typeof': Symbol(react.transitional.element),\\n    type: 'code',\\n    key: null,\\n    props: {\\n      className: 'language-ts',\\n      children: 'const greeting = \\\"Hello, World!\\\"\\\\n'\\n    },\\n    _owner: {\\n      name: '_createMdxContent',\\n      env: 'Server',\\n      key: null,\\n      owner: [Object],\\n      props: [Object]\\n    },\\n    _store: {}\\n  }\\n}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"As you can see we want to access \",[\"$\",\"code\",null,{\"children\":\"props.children.props.className\"}],\" to get the language and \",[\"$\",\"code\",null,{\"children\":\"props.children.props.children\"}],\" to get the code itself.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"props.children.props.className\"}],\" is a string that looks like \",[\"$\",\"code\",null,{\"children\":\"language-\u003clanguage\u003e\"}],\".\\nWhere \",[\"$\",\"code\",null,{\"children\":\"\u003clanguage\u003e\"}],\" is the language specified in the markdown for the code block.\\nWe'll want to \",[\"$\",\"code\",null,{\"children\":\"split()\"}],\" the string to get the language without the prepended \",[\"$\",\"code\",null,{\"children\":\"language-\"}],\", and pass it to the \",[\"$\",\"code\",null,{\"children\":\"highlight()\"}],\" method.\\nThe full \",[\"$\",\"code\",null,{\"children\":\"language-\u003clanguage\u003e\"}],\" string is still needed because it's a higlight.js class name used\\nto apply the CSS necessary for syntax highlighting.\"]}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"props-type-problem\",\"className\":\"styles_linktitle__p04j4\",\"children\":[\"$\",\"a\",null,{\"href\":\"#props-type-problem\",\"className\":\"no-underline\",\"children\":\"Props Type Problem\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Unfortunately, the type of \",[\"$\",\"code\",null,{\"children\":\"props\"}],\" is not accurate enough for our needs:\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"break-words code-block text-wrap\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ts hljs\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"hljs-title class_\\\"\u003eDetailedHTMLProps\u003c/span\u003e\u0026lt;\u003cspan class=\\\"hljs-title class_\\\"\u003eHTMLAttributes\u003c/span\u003e\u0026lt;\u003cspan class=\\\"hljs-title class_\\\"\u003eHTMLPreElement\u003c/span\u003e\u0026gt;, \u003cspan class=\\\"hljs-title class_\\\"\u003eHTMLPreElement\u003c/span\u003e\u0026gt;\\n\"}}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"We're missing the \",[\"$\",\"code\",null,{\"children\":\"prop.children.props.className\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"prop.children.props.children\"}],\" properties.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Additionally, there could be other instances where MDX needs to render a \",[\"$\",\"code\",null,{\"children\":\"\u003cpre\u003e\"}],\" tag, and we don't want to apply syntax highlighting in those cases.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"This is an apt situation to use a library like \",[\"$\",\"code\",null,{\"children\":\"zod\"}],\" to: define a schema for our props object, assert we're getting\\na code block, and act accordingly.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Given the props we expect to receive in case of a code block, we can define the following schema:\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"break-words code-block text-wrap\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ts hljs\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"hljs-keyword\\\"\u003eimport\u003c/span\u003e { z } \u003cspan class=\\\"hljs-keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;zod\u0026quot;\u003c/span\u003e\\n\\n\u003cspan class=\\\"hljs-keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003econst\u003c/span\u003e codeBlockPropsSchema = z.\u003cspan class=\\\"hljs-title function_\\\"\u003eobject\u003c/span\u003e({\\n  \u003cspan class=\\\"hljs-attr\\\"\u003echildren\u003c/span\u003e: z.\u003cspan class=\\\"hljs-title function_\\\"\u003eobject\u003c/span\u003e({\\n    \u003cspan class=\\\"hljs-attr\\\"\u003etype\u003c/span\u003e: z.\u003cspan class=\\\"hljs-title function_\\\"\u003eliteral\u003c/span\u003e(\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;code\u0026quot;\u003c/span\u003e),\\n    \u003cspan class=\\\"hljs-attr\\\"\u003eprops\u003c/span\u003e: z.\u003cspan class=\\\"hljs-title function_\\\"\u003eobject\u003c/span\u003e({\\n      \u003cspan class=\\\"hljs-attr\\\"\u003eclassName\u003c/span\u003e: z.\u003cspan class=\\\"hljs-title function_\\\"\u003estring\u003c/span\u003e().\u003cspan class=\\\"hljs-title function_\\\"\u003estartsWith\u003c/span\u003e(\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;language-\u0026quot;\u003c/span\u003e),\\n      \u003cspan class=\\\"hljs-attr\\\"\u003echildren\u003c/span\u003e: z.\u003cspan class=\\\"hljs-title function_\\\"\u003estring\u003c/span\u003e(),\\n    }),\\n  }),\\n})\\n\"}}]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"putting-it-all-together\",\"className\":\"styles_linktitle__p04j4\",\"children\":[\"$\",\"a\",null,{\"href\":\"#putting-it-all-together\",\"className\":\"no-underline\",\"children\":\"Putting it all Together\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Now we're ready to put everything together. We'll return a \",[\"$\",\"code\",null,{\"children\":\"\u003cpre\u003e\"}],\" tag wrapping a \",[\"$\",\"code\",null,{\"children\":\"\u003ccode\u003e\"}],\" tag where we'll need\\nto use the \",[\"$\",\"code\",null,{\"children\":\"dangerouslySetInnerHTML\"}],\" prop to correctly render the html outputted by the \",[\"$\",\"code\",null,{\"children\":\"highlight()\"}],\" method.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Another detail is that \",[\"$\",\"code\",null,{\"children\":\"highlight()\"}],\" can throw an error, if it does we abandon syntax highlighting and just return the original \",[\"$\",\"code\",null,{\"children\":\"\u003cpre\u003e\"}],\" tag\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Here's the resulting \",[\"$\",\"code\",null,{\"children\":\"mdx-components.tsx\"}],\" file:\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"break-words code-block text-wrap\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-tsx hljs\",\"dangerouslySetInnerHTML\":{\"__html\":\"$6\"}}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Notice the extra \",[\"$\",\"code\",null,{\"children\":\"hjls\"}],\" class I added, that class is not included in the html outputted by \",[\"$\",\"code\",null,{\"children\":\"highlight()\"}],\",\\nbut it is needed to set the text color for a given highlight.js theme.\\nNow, remember to include a highlight.js stylesheet in your application and you're good to go!\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"conclusion\",\"className\":\"styles_linktitle__p04j4\",\"children\":[\"$\",\"a\",null,{\"href\":\"#conclusion\",\"className\":\"no-underline\",\"children\":\"Conclusion\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"In my post on implementing dark mode I talked about how to toggle stylesheets based on the current theme, if you're interested, see\\n\",[\"$\",\"a\",null,{\"href\":\"/blog/dark-mode-a-not-so-simple-story\",\"children\":\"Dark Mode, a Not so Simple Story\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"I have to say I'm really happy with the result here. All the work gets done on the client and the resulting code blocks look great!\\nHowever, I think my current implementation can be improved. It was the easiest solution to integrate with the knowledge I had at the time I was creating this blog, but I know there's more out there.\",[\"$\",\"br\",null,{}],\"\\n\",\"In these cases I need to remind myself what the \",[\"$\",\"em\",null,{\"children\":\"purpose\"}],\" of my blog is. And that's the \",[\"$\",\"strong\",null,{\"children\":\"content\"}],\".\\nI don't want to spend too much time implementing the perfect syntax highlighting system, supporting features that don't\\nadd much to my \",[\"$\",\"em\",null,{\"children\":\"WHY\"}],\".\",[\"$\",\"br\",null,{}],\"\\n\",\"That being said, I'm still curious about exploring plugins like\\n\",[\"$\",\"a\",null,{\"href\":\"https://github.com/rehype-pretty/rehype-pretty-code?tab=readme-ov-file\",\"children\":\"rehype-pretty-code\"}],\"\\nwhich offer cool features like line numbers, line highlighting, inline code highlighting, and more!\"]}]]}]]}]}]]}]],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/fadc07fb3bbae6bd.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L7\",null,{\"children\":\"$L8\"}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"rUi0kpWn1RCTPf6JSbZlI\",{\"children\":[[\"$\",\"$L9\",null,{\"children\":\"$La\"}],[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\na:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"link\",\"1\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"32x32\"}]]\n"])</script><script>self.__next_f.push([1,"8:null\n"])</script></body></html>